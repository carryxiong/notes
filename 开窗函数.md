## 开窗函数

### 定义

今天看见代码中有@rank:=@rank+1，这种语句，自己也看不懂是啥就去查了查，开窗函数，感觉这个东西就是在表中加了个字段，给每一行都给了个序号，sql中@rank表示定义一个变量为rank，而后面的:=为赋值就是=号，而后面的@rank+1，就是rank这个变量的值为之前的rank值+1，那么问题来了，就是我们的初始值呢？不可能没有初始值的啊，所以一般在查表的时候会给被查询的表做个连接。

### 实例

![image-20200916110109899](D:\Programfile\Typora\images\image-20200916110109899.png)

对于这个user表，我们查询的时候想要有个排名的话，就可以使用这个来实现我们的功能，等同于开窗函数了。

select    user.*, @currank:=@currank+1 as r   from  user  ,(select @currank:=0)

#### 注意

这里有个问题就是这里为啥不知道@currank:=@currank+1 as rank 会报错，起别名为rank好像有问题，猜测是因为这个rank词语是个关键字，不可以使用。

### 后续

确实是因为rank这个词在MySQL8的版本中被加入了关键词了，所以无法使用了。



